-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.poll_results (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  poll_id uuid NOT NULL,
  winning_option_index integer NOT NULL,
  total_participants integer NOT NULL,
  total_votes_cast integer NOT NULL,
  average_credibility numeric NOT NULL,
  result_announced_at timestamp with time zone DEFAULT now(),
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT poll_results_pkey PRIMARY KEY (id),
  CONSTRAINT poll_results_poll_id_fkey FOREIGN KEY (poll_id) REFERENCES public.polls(id)
);
CREATE TABLE public.polls (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  title character varying NOT NULL,
  description text NOT NULL,
  creator_id uuid NOT NULL,
  creator_address character varying NOT NULL,
  options ARRAY NOT NULL,
  category character varying DEFAULT 'General'::character varying,
  duration_hours integer NOT NULL,
  end_time timestamp with time zone NOT NULL,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  is_active boolean DEFAULT true,
  total_votes integer DEFAULT 0,
  total_pool numeric DEFAULT 0,
  contract_poll_id integer,
  is_on_chain boolean DEFAULT false,
  blockchain_id character varying,
  transaction_hash character varying,
  min_credibility_required numeric DEFAULT 0.00 CHECK (min_credibility_required >= 0::numeric AND min_credibility_required <= 100::numeric),
  max_voters integer CHECK (max_voters IS NULL OR max_voters > 0),
  current_voter_count integer DEFAULT 0,
  is_credibility_gated boolean DEFAULT false,
  voting_weight_multiplier numeric DEFAULT 1.00 CHECK (voting_weight_multiplier >= 0.1 AND voting_weight_multiplier <= 5.0),
  creator_credibility_bonus numeric DEFAULT 0.00 CHECK (creator_credibility_bonus >= 0::numeric AND creator_credibility_bonus <= 10::numeric),
  CONSTRAINT polls_pkey PRIMARY KEY (id),
  CONSTRAINT polls_creator_id_fkey FOREIGN KEY (creator_id) REFERENCES public.users(id)
);
CREATE TABLE public.users (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  wallet_address character varying NOT NULL UNIQUE,
  username character varying,
  avatar_url text,
  total_polls_created integer DEFAULT 0,
  total_votes_cast integer DEFAULT 0,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  credibility_score numeric DEFAULT 60.00 CHECK (credibility_score >= 0::numeric AND credibility_score <= 100::numeric),
  successful_predictions integer DEFAULT 0,
  total_predictions integer DEFAULT 0,
  reputation_level character varying DEFAULT 'Novice'::character varying CHECK (reputation_level::text = ANY (ARRAY['Novice'::character varying, 'Apprentice'::character varying, 'Expert'::character varying, 'Master'::character varying, 'Legend'::character varying]::text[])),
  last_activity timestamp with time zone DEFAULT now(),
  CONSTRAINT users_pkey PRIMARY KEY (id)
);
CREATE TABLE public.votes (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  poll_id uuid NOT NULL,
  voter_id uuid NOT NULL,
  voter_address character varying NOT NULL,
  option_index integer NOT NULL,
  amount numeric NOT NULL DEFAULT 0.001,
  tx_hash character varying,
  created_at timestamp with time zone DEFAULT now(),
  is_on_chain boolean DEFAULT false,
  voter_credibility_at_time numeric NOT NULL,
  vote_weight numeric DEFAULT 1.0000,
  credibility_earned numeric DEFAULT 0.00,
  is_correct_prediction boolean,
  CONSTRAINT votes_pkey PRIMARY KEY (id),
  CONSTRAINT votes_poll_id_fkey FOREIGN KEY (poll_id) REFERENCES public.polls(id),
  CONSTRAINT votes_voter_id_fkey FOREIGN KEY (voter_id) REFERENCES public.users(id)
);

	
DB PASSWORD : bWnum2GN40Q1Tc1K

	

	
	 
	
	